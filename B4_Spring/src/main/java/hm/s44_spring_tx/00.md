
### 声明式事务
+ 就是通过配置的方式，比如通过配置文件（xml）或者注解的方式，告诉spring，哪些方法需要spring帮忙管理事务，然后开发者只用关注业务代码，而事务的事情spring自动帮我们控制。

### 2种实现方式
+ 配置文件的方式，即在spring xml文件中进行统一配置，开发者基本上就不用关注事务的事情了，代码中无需关心任何和事务相关的代码，一切交给spring处理。
+ 注解的方式，只需在需要spring来帮忙管理事务的方法上加上@Transaction注解就可以了，注解的方式相对来说更简洁一些，都需要开发者自己去进行配置，可能有些同学对spring不是太熟悉，所以配置这个有一定的风险，做好代码review就可以了。

### 声明式事务注解方式5个步骤
+ 1、启用Spring的注释驱动事务管理功能
+ 2、定义事务管理器
+ 3、需使用事务的目标上加@Transaction注解


|参数|	描述|
|---|---|
|value|指定事务管理器的bean名称，如果容器中有多事务管理器PlatformTransactionManager，那么你得告诉spring，当前配置需要使用哪个事务管理器|
|transactionManager|	同value，value和transactionManager选配一个就行，也可以为空，如果为空，默认会从容器中按照类型查找一个事务管理器bean|
|propagation|	事务的传播属性，下篇文章详细介绍|
|isolation	|事务的隔离级别，就是制定数据库的隔离级别，数据库隔离级别大家知道么？不知道的可以去补一下
|timeout|	事务执行的超时时间（秒），执行一个方法，比如有问题，那我不可能等你一天吧，可能最多我只能等你10秒 10秒后，还没有执行完毕，就弹出一个超时异常吧
|readOnly|	是否是只读事务，比如某个方法中只有查询操作，我们可以指定事务是只读的 设置了这个参数，可能数据库会做一些性能优化，提升查询速度
|rollbackFor|	定义零(0)个或更多异常类，这些异常类必须是Throwable的子类，当方法抛出这些异常及其子类异常的时候，spring会让事务回滚 如果不配做，那么默认会在 RuntimeException 或者 Error 情况下，事务才会回滚
|rollbackForClassName|	同 rollbackFor，只是这个地方使用的是类名
|noRollbackFor	|定义零(0)个或更多异常类，这些异常类必须是Throwable的子类，当方法抛出这些异常的时候，事务不会回滚
|noRollbackForClassName|	同 noRollbackFor，只是这个地方使用的是类名

+ 4、执行db业务操作
+ 5、启动spring容器，使用bean执行业务操作


### 7种传播行为

|事务传播行为类型|	说明|
|---|---|
|REQUIRED|	如果当前事务管理器中没有事务，就新建一个事务，如果已经存在一个事务中，加入到这个事务中。这是最常见的选择，是默认的传播行为。|
|SUPPORTS|	支持当前事务，如果当前事务管理器中没有事务，就以非事务方式执行。|
|MANDATORY|	使用当前的事务，如果当前事务管理器中没有事务，就抛出异常。|
|REQUIRES_NEW|	新建事务，如果当前事务管理器中存在事务，把当前事务挂起，然后会新建一个事务。|
|NOT_SUPPORTED|	以非事务方式执行操作，如果当前事务管理器中存在事务，就把当前事务挂起。|
|NEVER|	以非事务方式执行，如果当前事务管理器中存在事务，则抛出异常。|
|NESTED|	如果当前事务管理器中存在事务，则在嵌套事务内执行；如果当前事务管理器中没有事务，则执行与PROPAGATION_REQUIRED类似的操作。|

